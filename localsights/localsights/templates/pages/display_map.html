{% extends 'base.html' %}
{% load static i18n %}

{% block title %}localsights{% endblock title %}

{% block css %}
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Your stuff: Third-party CSS libraries go here -->
    <!-- This file stores project-specific CSS -->

    <link href="{% static 'css/project.css' %}" rel="stylesheet">
    <!-- Your specific CSS file for the maps page -->
    <link href="{% static 'css/maps.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}

<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

<script> 
    let map

    function initMap(){

        // var locations = {{ locations|safe}};
        // var firstLocation = locations[0]
        // var infoWindow = []

        map = new google.maps.Map(document.getElementById("map"),{
            center: { lat: 38.4351, lng: -78.8698}, 
            zoom: 14,
        }
        );

    //     locations.forEach(function (location){
    //         var marker = new google.maps.Marker({
    //             position: {lat: location.lat, lng: location.lng}, 
    //             map: map, 
    //             title: location.name
    //         });

    //         var infowindow = new google.maps.InfoWindow({
    //             content: location.name, 
    //         });

    //         infoWindow.push(infowindow)

    //         marker.addListener('click', function(){
    //             infoWindow.forEach(function(iw){
    //                 iw.close();
    //             });

    //             infowindow.open(map, marker)
    //         });
    //     });
    }

    window.initMap = initMap

</script>

<div class="pageholder">
    <div class="titleholder"> 
        
        <div class="title"> Your Locations on a map! </div> 
        
    </div>


    <div class="linkholder">
        <div class="mapholder"> 
            <div id="map"> </div>

            <script async
                src="https://maps.googleapis.com/maps/api/js?key={{key}}&callback=initMap">
            </script>

        </div>
        
     </div>


    <div class="linkholder">  
        <a href="{% url 'home' %}"> Homepage </a> 

    </div>



</div>


{% endblock %}